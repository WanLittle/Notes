**文件系统 **是操作系统中管理持久性数据的子系统，提供数据存储和访问功能

功能：

- 分配文件磁盘空间
- 管理文件集合
- 数据可靠和安全



文件是具有符号名，由字节序列构成的数据项集合。

文件是文件系统的基本数据单位。文件名是文件的标识符号



文件属性：名称、类型、位置、大小、保护、创建者、创建时间、最近修改时间、…

文件头：文件头是位于文件开头的一段承担一定任务的数据。包括：文件属性、文件存储位置和顺序



内核会跟踪进程打开的所有文件

- 操作系统为每个进程维护一个 **打开文件表**，打开文件表中维护打开文件的状态和信息
  - 文件指针
  - 文件打开计数
  - 文件的磁盘位置
  - 访问权限
- **文件描述符** 是打开文件的标识，也就是打开文件表的索引，每个表项都有一个指向已打开文件的指针



操作系统以 **数据块** 的形式访问文件，数据块是逻辑存储单元，而磁盘扇区是物理存储单元，通常数据块大于扇区大小。

文件系统中的基本操作单位是数据块，例如, `getc()`和`putc()`即使每次只访问1字节的数据，也需要缓存目标数据4096字节（假设数据块大小为 4K）



文件访问模式：顺序访问、随机访问、索引访问



文件内部结构

- 无结构：字节序列
- 简单记录结构：分列、固定长度、可变长度
- 复杂结构：格式化的文档（Word、PDF）、可执行文件、...



分层文件系统：文件以目录的方式组织起来，构成树型结构。

目录也是一类特殊的文件，实现方式：线性列表、哈希表 。



文件系统种类：

- 磁盘文件系统：文件存储在数据存储设备上, 如磁盘。（例如: FAT, NTFS, ext2/3, ISO9660,等）
- 数据库文件系统
- 日志文件系统
- 网络/分布式文件系统
- 特殊/虚拟文件系统


