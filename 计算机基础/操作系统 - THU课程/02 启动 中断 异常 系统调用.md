内存分为：

- RAM，随机存储器，关机断电丢数据（内存条）
- ROM，只读存储器，关机断电不丢失数据（BIOS）
- CACHE，是高速缓存，是速度特别快的RAM

而狭义的内存，是指电脑的内存条，就是RAM



系统启动规范：BIOS（Basic Input Output System）、UEFI（统一可扩展固件接口）



操作系统**启动流程**：

- 系统加电
- CPU加电稳定后从 0XFFFF0（CS:IP）读第一条指令，进到**BIOS**
- BIOS 初始化
- BIOS 通过 **主引导记录（Master Boot Record，MBR）**进到相应活动分区

- BIOS 在活动分区，根据其 **主引导扇区** 读取文件系统的加载程序
- 跳转到 CS:IP = 0000:7c00，即从BIOS切换到 **加载程序（BootLoader）**
- 加载程序将操作系统的代码和数据从硬盘加载到内存中
- 跳转到操作系统的起始地址



BIOS：

-  固化到计算机主板上的程序

- 功能：
  - 处理基本的输入输出：以中断调用的方式 提供了基本的I/O功能
  - 系统设置信息
  - 开机后自检程序
  - 系统自启动程序
-  BIOS-MBR（支持4分区）、BIOS-GPT（支持4+分区）、PXE（支持网络启动）



BIOS初始化：

- 硬件自检POST
- 检测系统中内存和显卡等关键部件的存在和工作状态
- 查找并执行显卡等接口的BIOS，进行设备初始化
- 执行系统的BIOS，进行系统检测：检测和配置系统中安装的即插即用设备
- 更新CMOS中的扩展系统配置数据ESCD
- 按指定启动顺序从软盘、硬盘或光驱启动





系统调用：应用程序主动向操作系统发出服务请求

- 操作系统服务的编程接口
- 通常由高级语言编写（C或者C++）
- 程序访问通常是通过高层次的 API 接口而不是直接进行系统调用



异常：非法指令或者其他原因导致当前指令执行失败



中断（interrupt）：来自硬件设备的处理请求

- 硬件处理：在CPU初始化时设置中断使能标志，依据内部或外部事件设置中断标志，依据中断向量调用相应中断服务例程
- 软件：现场保存、中断服务处理、清除中断标记、现场恢复

- 中断可能嵌套





函数调用和系统调用的不同处

- INT 和 IRET 指令用于系统调用
- CALL 和 RET 用于常规调用
- 系统调用时，堆栈切换和特权级的转换
- 函数调用时没有堆栈切换





大多数计算机系统将CPU执行状态分为**目态** 与 **管态**。CPU的状态属于程序状态字PSW的一位。CPU交替执行操作系统程序和用户程序。

- **管态 **又叫特权态，系统态 或 核心态。CPU在管态下可以执行指令系统的全集。通常，操作系统在管态下运行。 
- **目态** 又叫常态或用户态。机器处于目态时，程序只能执行非特权指令。用户程序只能在目态下运行，如果用户程序在目态下执行特权指令，硬件将发生中断，由操作系统获得控制，特权指令执行被禁止，这样可以防止用户程序有意或无意的破坏系统。 

从目态转换为管态的唯一途径是中断。 

从管态到目态可以通过修改程序状态字来实现，这将伴随这由操作系统程序到用户程序的转换。



