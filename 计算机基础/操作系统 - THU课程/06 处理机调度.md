处理机调度

- 从就绪队列中挑选下一个占用CPU运行的进程
- 从多个可用CPU中挑选就绪进程可使用的CPU资源



调度时机

- 非抢占系统：当前进程主动放弃CPU
- 可抢占系统：
  - 中断请求被服务例程响应完成时
  - 当前进程被抢占（进程时间片用完、进程从等待切换到就绪）



比较调度算法的准则

- CPU使用率：CPU处于忙状态的时间百分比
- 吞吐量：单位时间内完成的进程数量
- 周转时间：进程从初始化到结束(包括等待)的总时间
- 就绪等待时间：进程在就绪队列中的总时间
- 响应时间：从提交请求到产生响应所花费的总时间



调度算法：

- 先来先服务算法(First Come First Served, FCFS)：选择先进入就绪队列中的进程占用CPU进入运行状态
- 短进程优先算法(SPN)：选择就绪队列中执行时间最短的进程
- 最高响应比优先算法(HRRN)：选择就绪队列中 响应比R值 最高的进程
  - 响应比R = (w+s) / s，其中w是等待时间，s是执行时间
- 时间片轮转算法(RR, Round-Robin)：
- 多级队列调度算法(MQ)：就绪队列被划分成多个独立的子队列（比如前台、后台），每个队列拥有自己的调度策略
- 多级反馈队列算法(MLFQ)：进程可在不同队列间移动的多级队列算法（多种算法的集成）
  - 时间片大小随优先级级别增加而增加
  - 如进程在当前的时间片没有完成，则降到下一个优先级
  - I/O密集型进程停留在高优先级
  - CPU密集型进程的优先级下降很快
- 公平共享调度算法(FSS, Fair Share Scheduling)：控制用户对系统资源的访问（公平是第一要素）



实时操作系统：正确性依赖于其时间和功能两方面的操作系统

- 强实时操作系统：要求在指定的时间内必须完成重要的任务
- 弱实时操作系统：重要进程有高优先级，要求尽量但非必须完成

可调度性表示一个实时操作系统能够满足任务时限要求

实时调度：

- 速率单调调度算法(RM, Rate Monotonic)：通过周期安排优先级 、周期越短优先级越高、执行周期最短的任务
- 最早截止时间优先算法 (EDF, Earliest Deadline First) ：截止时间越早优先级越高、执行截止时间最早的任务



优先级反置(Priority Inversion)

- 操作系统中出现高优先级进程长时间等待低优先级进程所占用资源的现象
- 基于优先级的可抢占调度算法存在优先级反置



优先级继承（Priority Inheritance）：占用资源的低优先级进程继承申请资源的高优先级进程的优先级，只在占有资源的低优先级进程被阻塞时,才提高占有资源进程的优先级



优先级天花板协议（priority ceiling protocol）：占用资源进程的优先级和所有可能申请该资源的进程的最高优先级相同

- 不管是否发生等待,都提升占用资源进程的优先级
- 优先级高于系统中所有被锁定的资源的优先级上限，任务执行临界区时就不会被阻塞